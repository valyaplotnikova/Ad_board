**Backend-часть для сайта объявлений**


1. Проект подключен к базе данных Postgres.
2. Проект подключен к CORS headers.
3. Проект подключен к Swagger.

 

**Модель юзера. Настройка авторизации и аутентификации.**

- Модель пользователя: 
  - Реализованные поля: 
    - first_name — имя пользователя (строка).
    - last_name — фамилия пользователя (строка).
    - phone — телефон для связи (строка).
    - email — электронная почта пользователя (email) **(используется в качестве логина).**
    - role — роль пользователя, доступные значения: user, admin.
    - image — аватарка пользователя.
- Авторизация и аутентификация: 
  - Настроена авторизацию пользователя с помощью библиотеки simple_jwt.
  - Сброс и восстановление пароля реализован через почту: 
    - Юзер отправляет POST-запрос на адрес /users/reset_password/ с содержанием:

      ```javascript
      {
          "email": "example@mail.com"
      }
      
      ```
    - Сервер высылает на почту ссылку вида:

      ```javascript
      "/<url>/{uid}/{token}" # предварительно это настраивается в settings
      
      ```
    - Юзер отправляет POST-запрос на адрес /users/reset_password_confirm с содержанием:

      ```javascript
      {
          "uid": "uid",
          "token": "token",
          "new_password": "P4$$W0RD"
      }
      
      ```

 

**Модели объявлений и отзывов.**

- Модель объявления содержит следующие поля: 
  - title — название товара.
  - price — цена товара (целое число).
  - description — описание товара.
  - author — пользователь, который создал объявление.
  - created_at — время и дата создания объявления.
  - Объявления должны быть отсортированы по дате создания (чем новее, тем выше).
- Модель отзыва содержит следующие поля: 
  - text — текст отзыва.
  - author — пользователь, который оставил отзыв.
  - ad — объявление, под которым оставлен отзыв.
  - created_at — время и дата создания отзыва.

 

**Views и эндпоинты.**

- Созданы эндпоинты для всех необходимых операций с использованием DRF.
- Реализован поиск товаров по названию с использованием библиотеки `django-filter`.
- Эндпоинт `/ads/` поддерживает пагинацию с ограничением не более 4 объектов на странице.

 

**Определение permissions к views.**

- Анонимный пользователь может: 
  - получать список объявлений.
- Пользователь может: 
  - получать список объявлений,
  - получать одно объявление,
  - создавать объявление,
  - редактировать и удалять свое объявление,
  - получать список комментариев,
  - создавать комментарии,
  - редактировать/удалять свои комментарии.
- Администратор может: 
  - дополнительно к правам пользователя редактировать или удалять объявления и комментарии любых других пользователей.

 

**Упаковка в Docker.**

- Создан `Dockerfile` для сборки образа приложения.
- Создан `docker-compose.yml` для запуска приложения и базы данных PostgreSQL.

 

**Написание тестов.**

- Написаны тесты для всех основных функций платформы.
- Использована библиотека `pytest` для тестирования.


**Инструкция для запуска проекта**


Клонируйте данный репозиторий к себе на локальную машину:
    git clone https://github.com/valyaplotnikova/Ad_board.git

В файле .env.sample подставьте свои переменные окружения и переименуйте файл в .env

Запустите Docker

Введите команду в терминале(выполнение команды осуществляется из папки проекта):

Для Compose V1:
```python
docker-compose up -d --build 
```
Для Compose V2:
```python
docker compose up -d --build 
```
